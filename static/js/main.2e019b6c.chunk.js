(this.webpackJsonpkakurasu=this.webpackJsonpkakurasu||[]).push([[0],{14:function(e,t,s){},15:function(e,t,s){},16:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s(2),i=s.n(r),o=s(6),n=s.n(o),c=(s(14),s(3)),u=(s(15),s(1));function l(e){var t=e.viewState.playerBoard[e.row][e.col],s="";return s="*"===t?"piece piece-on":"x"===t?"piece piece-off":"piece piece-blank",Object(a.jsx)("div",{onClick:function(){e.onSquareClick(e.row,e.col)},className:"square square-".concat(e.size),children:Object(a.jsx)("div",{className:"piece ".concat(s)})})}function h(e){var t="";return e.i>0&&e.i<e.size+1?(t=e.i,Object(a.jsx)("div",{className:"square header-square square-".concat(e.size),children:t})):Object(a.jsx)("div",{onClick:e.toggleBoardMode,className:"square flipper-square header-square row-start-square square-".concat(e.size),children:"Flip"})}function m(e){if(e.i>0&&e.i<e.size+1){var t=e.viewState.colSums[e.i-1],s=e.viewState.targetColSums[e.i-1],r=e.viewState.antiColSums[e.i-1],i=s-t,o=e.viewState.antiTargetColSums[e.i-1]-r;return e.boardMode?Object(a.jsx)("div",{className:"square footer-square square-".concat(e.size),children:Object(a.jsx)("div",{className:"score-on",children:i})}):Object(a.jsx)("div",{className:"square footer-square square-".concat(e.size),children:Object(a.jsx)("div",{className:"score-off",children:o})})}return 0===e.i?Object(a.jsx)("div",{className:"square footer-square row-start-square square-".concat(e.size)}):Object(a.jsx)("div",{className:"square footer-square row-end-square square-".concat(e.size)})}function j(e){return Object(a.jsx)("div",{className:"square row-start-square square-".concat(e.size),children:e.i})}function d(e){var t=e.viewState.rowSums[e.row],s=e.viewState.targetRowSums[e.row],r=e.viewState.antiRowSums[e.row],i=s-t,o=e.viewState.antiTargetRowSums[e.row]-r;return e.boardMode?Object(a.jsx)("div",{className:"square row-end-square square-".concat(e.size),children:Object(a.jsx)("div",{className:"score-on",children:i})}):Object(a.jsx)("div",{className:"square row-end-square square-".concat(e.size),children:Object(a.jsx)("div",{className:"score-off",children:o})})}function v(e){return Object(a.jsxs)("div",{className:"square sigma-square row-end-square header-square square-".concat(e.size),children:["\u03a3",e.viewState.sigma]})}function f(e){for(var t=[],s=0;s<e.size+1;s++)t.push(Object(a.jsx)(h,Object(u.a)({i:s},e),"hs".concat(s)));return t.push(Object(a.jsx)(v,Object(u.a)({},e),"hssigma")),t}function S(e){for(var t=[],s=0;s<e.size+2;s++)t.push(Object(a.jsx)(m,Object(u.a)({i:s},e),"fs".concat(s)));return t}function b(e){for(var t=[Object(a.jsx)(f,Object(u.a)({},e),"headerSquares")],s=0;s<(e.size+2)*e.size;s++){var r=s%(e.size+2),i=(s-r)/(e.size+2);0===r?t.push(Object(a.jsx)(j,Object(u.a)({i:i+1},e),"rss".concat(s))):r===e.size+1?t.push(Object(a.jsx)(d,Object(u.a)({row:i},e),"res".concat(i))):t.push(Object(a.jsx)(l,Object(u.a)({i:s,row:i,col:r-1},e),"reg".concat(s)))}return[].concat(t,[Object(a.jsx)(S,Object(u.a)({},e),"footerSquares")])}function g(e){var t=Object(r.useState)(!0),s=Object(c.a)(t,2),i=s[0],o=s[1];return Object(a.jsx)("div",{className:"board",children:Object(a.jsx)(b,Object(u.a)(Object(u.a)({},e),{},{boardMode:i,toggleBoardMode:function(){o(!i)}}))})}var w=s(5),O=s.n(w);function p(e){for(var t=[],s=e.min;s<=e.max;s++)t.push(Object(a.jsxs)("option",{value:s,children:[s,"x",s]},s));return t}function x(e){var t=O.a.get("defaultLevel")||6,s=Object(r.useState)(parseFloat(t)),o=Object(c.a)(s,2),n=o[0],u=o[1];return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("select",{value:n,onChange:function(e){u(parseFloat(e.currentTarget.value)),O.a.set("defaultLevel",e.currentTarget.value)},children:Object(a.jsx)(p,{min:3,max:13})}),Object(a.jsx)("button",{onClick:function(){e.onNewGame(n)},children:"Play"})]})}function q(e){return Object(a.jsxs)("div",{className:"new-game-screen",children:[Object(a.jsx)("h1",{children:"New Game"}),Object(a.jsx)(x,Object(u.a)({},e))]})}function y(e){return Object(a.jsxs)("div",{className:"player-win-screen",children:[Object(a.jsx)("h1",{children:"YOU WIN!"}),Object(a.jsx)("h3",{children:"Again?"}),Object(a.jsx)(x,Object(u.a)({},e))]})}var z=s(7),B=s(8),k=function(){function e(t){Object(z.a)(this,e),this.size=t,this.initPlayerBoard(),this.initTargetBoard(),this.meta={size:t,sigma:this.size*(this.size+1)/2,targetRowSums:this.rowSums("targetBoard","*"),targetColSums:this.colSums("targetBoard","*"),antiTargetRowSums:this.rowSums("targetBoard","x"),antiTargetColSums:this.colSums("targetBoard","x"),rowSums:Array(this.size).fill(0),colSums:Array(this.size).fill(0),antiRowSums:Array(this.size).fill(0),antiColSums:Array(this.size).fill(0)}}return Object(B.a)(e,[{key:"initTargetBoard",value:function(){this.targetBoard=[];for(var e=0;e<this.size;e++){for(var t=[],s=0;s<this.size;s++)Math.random()>.7?t.push("*"):t.push("x");this.targetBoard.push(t)}}},{key:"solveFill",value:function(e,t){var s=[];if(this.meta.rowSums[e]===this.meta.targetRowSums[e])for(var a=0;a<this.size;a++)""===this.playerBoard[e][a]&&(this.playerBoard[e][a]="x",s.push([e,a]));if(this.meta.colSums[t]===this.meta.targetColSums[t])for(var r=0;r<this.size;r++)""===this.playerBoard[r][t]&&(this.playerBoard[r][t]="x",s.push([r,t]));return s}},{key:"unSolveFill",value:function(e){for(var t=0;t<e.length;t++)this.playerBoard[e[t][0]][e[t][1]]=""}},{key:"solve",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0===e)for(var t=0;t<this.size;t++)this.solveFill(0,t);if(!this.shouldReject()){if(this.checkWinSolver())throw console.log("solution"),Error("BLARG");for(var s=0;s<this.size;s++)for(var a=0;a<this.size;a++)if(""===this.playerBoard[s][a]){this.toggleSquareSolver(s,a);var r=this.solveFill(s,a);this.solve(e+1),this.unSolveFill(r),this.toggleSquareSolver(s,a)}0===e&&console.log("Solver Complete")}}},{key:"initPlayerBoard",value:function(){this.playerBoard=[];for(var e=0;e<this.size;e++){for(var t=[],s=0;s<this.size;s++)t.push("");this.playerBoard.push(t)}}},{key:"rowSums",value:function(e,t){for(var s=[],a=0;a<this.size;a++){for(var r=0,i=0;i<this.size;i++)this[e][a][i]===t&&(r+=i+1);s.push(r)}return s}},{key:"colSums",value:function(e,t){for(var s=[],a=0;a<this.size;a++){for(var r=0,i=0;i<this.size;i++)this[e][i][a]===t&&(r+=i+1);s.push(r)}return s}},{key:"shouldReject",value:function(){for(var e=0;e<this.meta.rowSums.length;e++){var t=this.meta.rowSums[e];if(this.meta.targetRowSums[e]-t<0)return!0;var s=this.meta.colSums[e];if(this.meta.targetColSums[e]-s<0)return!0;var a=this.meta.antiRowSums[e];if(this.meta.antiTargetRowSums[e]-a<0)return!0;var r=this.meta.antiColSums[e];if(this.meta.antiTargetColSums[e]-r<0)return!0}return!1}},{key:"checkWin",value:function(){for(var e=0;e<this.meta.rowSums.length;e++){if(this.meta.rowSums[e]!==this.meta.targetRowSums[e])return!1;if(this.meta.colSums[e]!==this.meta.targetColSums[e])return!1;if(this.meta.antiRowSums[e]!==this.meta.antiTargetRowSums[e])return!1;if(this.meta.antiColSums[e]!==this.meta.antiTargetColSums[e])return!1}return!0}},{key:"checkWinSolver",value:function(){for(var e=0;e<this.meta.rowSums.length;e++){if(this.meta.rowSums[e]!==this.meta.targetRowSums[e])return!1;if(this.meta.colSums[e]!==this.meta.targetColSums[e])return!1}return!0}},{key:"export",value:function(){return Object(u.a)(Object(u.a)({},this.meta),{},{playerBoard:this.playerBoard.map((function(e){return e.slice(0)})),wonGame:this.checkWin()})}},{key:"debug",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"playerBoard",t=0;t<this.size;t++){for(var s=[],a=0;a<this.size;a++)s.push(this[e][t][a]);console.log(s)}}},{key:"toggleSquareSolver",value:function(e,t){""===this.playerBoard[e][t]?(this.playerBoard[e][t]="*",this.meta.rowSums[e]+=t+1,this.meta.colSums[t]+=e+1):(this.playerBoard[e][t]="",this.meta.rowSums[e]-=t+1,this.meta.colSums[t]-=e+1)}},{key:"toggleSquare",value:function(e,t){console.log(e,t),"*"===this.playerBoard[e][t]?(this.meta.rowSums[e]-=t+1,this.meta.colSums[t]-=e+1,this.meta.antiRowSums[e]+=t+1,this.meta.antiColSums[t]+=e+1,this.playerBoard[e][t]="x"):"x"===this.playerBoard[e][t]?(this.meta.antiRowSums[e]-=t+1,this.meta.antiColSums[t]-=e+1,this.playerBoard[e][t]=""):""===this.playerBoard[e][t]&&(this.meta.rowSums[e]+=t+1,this.meta.colSums[t]+=e+1,this.playerBoard[e][t]="*")}}]),e}(),N=null;var C=function(){var e=Object(r.useState)(null),t=Object(c.a)(e,2),s=t[0],i=t[1],o=Object(r.useState)(null),n=Object(c.a)(o,2),u=n[0],l=n[1],h=function(e){var t=new k(e);i(t),l(t.export()),clearInterval(N),N=setInterval((function(){l(t.export())}),500)};return window.gm=s,null===u?Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(q,{onNewGame:h})}):u.wonGame?Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(y,{viewState:u,onNewGame:h})}):Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(g,{size:u.size,onSquareClick:function(e,t){s.toggleSquare(e,t),s.debug(),l(s.export())},viewState:u})})},R=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,17)).then((function(t){var s=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;s(e),a(e),r(e),i(e),o(e)}))};n.a.render(Object(a.jsxs)(i.a.StrictMode,{children:[Object(a.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com"}),Object(a.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Texturina:wght@100&display=swap",rel:"stylesheet"}),Object(a.jsx)(C,{})]}),document.getElementById("root")),R()}},[[16,1,2]]]);
//# sourceMappingURL=main.2e019b6c.chunk.js.map