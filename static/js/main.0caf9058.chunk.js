(this.webpackJsonpkakurasu=this.webpackJsonpkakurasu||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a(2),i=a.n(r),c=a(6),n=a.n(c),o=(a(14),a(3)),u=(a(15),a(1));function l(e){var t=e.viewState.playerBoard[e.row][e.col],a="";return a="*"===t?"piece piece-on":"x"===t?"piece piece-off":"piece piece-blank",Object(s.jsx)("div",{onClick:function(){e.onSquareClick(e.row,e.col)},className:"square square-".concat(e.size),children:Object(s.jsx)("div",{className:"piece ".concat(a)})})}function j(e){var t="";return e.i>0&&e.i<e.size+1?(t=e.i,Object(s.jsx)("div",{className:"square header-square square-".concat(e.size),children:t})):Object(s.jsx)("div",{onClick:e.toggleBoardMode,className:"square flipper-square header-square row-start-square square-".concat(e.size),children:"Flip"})}function h(e){if(e.i>0&&e.i<e.size+1){var t=e.viewState.colSums[e.i-1],a=e.viewState.targetColSums[e.i-1],r=e.viewState.antiColSums[e.i-1],i=a-t,c=e.viewState.antiTargetColSums[e.i-1]-r;return e.boardMode?Object(s.jsx)("div",{className:"square footer-square square-".concat(e.size),children:Object(s.jsx)("div",{className:"score-on",children:i})}):Object(s.jsx)("div",{className:"square footer-square square-".concat(e.size),children:Object(s.jsx)("div",{className:"score-off",children:c})})}return 0===e.i?Object(s.jsx)("div",{className:"square footer-square row-start-square square-".concat(e.size)}):Object(s.jsx)("div",{className:"square footer-square row-end-square square-".concat(e.size)})}function d(e){return Object(s.jsx)("div",{className:"square row-start-square square-".concat(e.size),children:e.i})}function m(e){var t=e.viewState.rowSums[e.row],a=e.viewState.targetRowSums[e.row],r=e.viewState.antiRowSums[e.row],i=a-t,c=e.viewState.antiTargetRowSums[e.row]-r;return e.boardMode?Object(s.jsx)("div",{className:"square row-end-square square-".concat(e.size),children:Object(s.jsx)("div",{className:"score-on",children:i})}):Object(s.jsx)("div",{className:"square row-end-square square-".concat(e.size),children:Object(s.jsx)("div",{className:"score-off",children:c})})}function b(e){return Object(s.jsxs)("div",{className:"square sigma-square row-end-square header-square square-".concat(e.size),children:["\u03a3",e.viewState.sigma]})}function f(e){for(var t=[],a=0;a<e.size+1;a++)t.push(Object(s.jsx)(j,Object(u.a)({i:a},e),"hs".concat(a)));return t.push(Object(s.jsx)(b,Object(u.a)({},e),"hssigma")),t}function v(e){for(var t=[],a=0;a<e.size+2;a++)t.push(Object(s.jsx)(h,Object(u.a)({i:a},e),"fs".concat(a)));return t}function O(e){for(var t=[Object(s.jsx)(f,Object(u.a)({},e),"headerSquares")],a=0;a<(e.size+2)*e.size;a++){var r=a%(e.size+2),i=(a-r)/(e.size+2);0===r?t.push(Object(s.jsx)(d,Object(u.a)({i:i+1},e),"rss".concat(a))):r===e.size+1?t.push(Object(s.jsx)(m,Object(u.a)({row:i},e),"res".concat(i))):t.push(Object(s.jsx)(l,Object(u.a)({i:a,row:i,col:r-1},e),"reg".concat(a)))}return[].concat(t,[Object(s.jsx)(v,Object(u.a)({},e),"footerSquares")])}function S(e){var t=Object(r.useState)(!0),a=Object(o.a)(t,2),i=a[0],c=a[1];return Object(s.jsx)("div",{className:"board",children:Object(s.jsx)(O,Object(u.a)(Object(u.a)({},e),{},{boardMode:i,toggleBoardMode:function(){c(!i)}}))})}var w=a(5),x=a.n(w);function g(e){for(var t=[],a=e.min;a<=e.max;a++)t.push(Object(s.jsxs)("option",{value:a,children:[a,"x",a]},a));return t}function p(e){var t=x.a.get("defaultLevel")||6,a=Object(r.useState)(parseFloat(t)),c=Object(o.a)(a,2),n=c[0],u=c[1];return Object(s.jsxs)(i.a.Fragment,{children:[Object(s.jsx)("select",{value:n,onChange:function(e){u(parseFloat(e.currentTarget.value)),x.a.set("defaultLevel",e.currentTarget.value)},children:Object(s.jsx)(g,{min:4,max:13})}),Object(s.jsx)("button",{onClick:function(){e.onNewGame(n)},children:"Play"})]})}function q(e){return Object(s.jsxs)("div",{className:"new-game-screen",children:[Object(s.jsx)("h1",{children:"New Game"}),Object(s.jsx)(p,Object(u.a)({},e))]})}function z(e){return Object(s.jsxs)("div",{className:"player-win-screen",children:[Object(s.jsx)("h1",{children:"YOU WIN!"}),Object(s.jsx)("h3",{children:"Again?"}),Object(s.jsx)(p,Object(u.a)({},e))]})}var y=a(7),N=a(8),B=function(){function e(t){Object(y.a)(this,e),this.size=t,this.initPlayerBoard(),this.initTargetBoard(),this.meta={size:t,sigma:this.size*(this.size+1)/2,targetRowSums:this.rowSums("targetBoard","*"),targetColSums:this.colSums("targetBoard","*"),antiTargetRowSums:this.rowSums("targetBoard","x"),antiTargetColSums:this.colSums("targetBoard","x"),rowSums:Array(this.size).fill(0),colSums:Array(this.size).fill(0),antiRowSums:Array(this.size).fill(0),antiColSums:Array(this.size).fill(0)}}return Object(N.a)(e,[{key:"initTargetBoard",value:function(){this.targetBoard=[];for(var e=0;e<this.size;e++){for(var t=[],a=0;a<this.size;a++)Math.random()>.7?t.push("*"):t.push("x");this.targetBoard.push(t)}}},{key:"solve",value:function(){}},{key:"initPlayerBoard",value:function(){this.playerBoard=[];for(var e=0;e<this.size;e++){for(var t=[],a=0;a<this.size;a++)t.push("");this.playerBoard.push(t)}}},{key:"rowSums",value:function(e,t){for(var a=[],s=0;s<this.size;s++){for(var r=0,i=0;i<this.size;i++)this[e][s][i]===t&&(r+=i+1);a.push(r)}return a}},{key:"colSums",value:function(e,t){for(var a=[],s=0;s<this.size;s++){for(var r=0,i=0;i<this.size;i++)this[e][i][s]===t&&(r+=i+1);a.push(r)}return a}},{key:"checkWin",value:function(e){for(var t=0;t<e.size;t++){if(e.rowSums[t]!==e.targetRowSums[t])return!1;if(e.colSums[t]!==e.targetColSums[t])return!1;if(e.antiRowSums[t]!==e.antiTargetRowSums[t])return!1;if(e.antiColSums[t]!==e.antiTargetColSums[t])return!1}return!0}},{key:"export",value:function(){return Object(u.a)(Object(u.a)({},this.meta),{},{playerBoard:this.playerBoard.map((function(e){return e.slice(0)})),wonGame:this.checkWin(this.meta)})}},{key:"debug",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"playerBoard",t=0;t<this.size;t++){for(var a=[],s=0;s<this.size;s++)a.push(this[e][t][s]);console.log(a)}}},{key:"toggleSquare",value:function(e,t){console.log(e,t),"*"===this.playerBoard[e][t]?(this.meta.rowSums[e]-=t+1,this.meta.colSums[t]-=e+1,this.meta.antiRowSums[e]+=t+1,this.meta.antiColSums[t]+=e+1,this.playerBoard[e][t]="x"):"x"===this.playerBoard[e][t]?(this.meta.antiRowSums[e]-=t+1,this.meta.antiColSums[t]-=e+1,this.playerBoard[e][t]=""):""===this.playerBoard[e][t]&&(this.meta.rowSums[e]+=t+1,this.meta.colSums[t]+=e+1,this.playerBoard[e][t]="*")}}]),e}();var k=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),a=t[0],i=t[1],c=Object(r.useState)(null),n=Object(o.a)(c,2),u=n[0],l=n[1],j=function(e){var t=new B(e);i(t),l(t.export())};return window.gm=a,null===u?Object(s.jsx)("div",{className:"container",children:Object(s.jsx)(q,{onNewGame:j})}):u.wonGame?Object(s.jsx)("div",{className:"container",children:Object(s.jsx)(z,{viewState:u,onNewGame:j})}):Object(s.jsx)("div",{className:"container",children:Object(s.jsx)(S,{size:u.size,onSquareClick:function(e,t){a.toggleSquare(e,t),a.debug(),l(a.export())},viewState:u})})},C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),s(e),r(e),i(e),c(e)}))};n.a.render(Object(s.jsxs)(i.a.StrictMode,{children:[Object(s.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com"}),Object(s.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Texturina:wght@100&display=swap",rel:"stylesheet"}),Object(s.jsx)(k,{})]}),document.getElementById("root")),C()}},[[16,1,2]]]);
//# sourceMappingURL=main.0caf9058.chunk.js.map